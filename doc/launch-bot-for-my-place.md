# Як запустити такого бота для власної локації

Ти можеш з легкістю запустити власного бота для свого ЖК (будинка, офіса, квартири, ...) без програмування і технічних складностей.

У найпростішрому випадку ти можеш використати звичайний роутер, який відповідає наступним вимогам:

- статична IP-адреса (це зазвичай додаткова послуга, яку можна замовити у провайдера) або доменне ім‘я
- живлення від мережі (**не від акумулятора!**)
- включений протокол ICMP (зазвичай включений за замовченням - так що тобі не потрібно нічого міняти в налаштуваннях роутера)

Якщо твій роутер заживлений від акумулятора (або ти не хочеш включати ICMP) - то сервіс підтримує альтернативний варіант перевірки через HTTP, для якого знадобиться трохи більше, ніж просто роутер, але який теж є дуже простим.

# Покрокова інструкція по запуску

## 1. Забезпеч хост для перевірки за допомогою ping або HTTP

**Спочатку повністю розберися з цим кроком, перш ніж переходити до наступних!**

Найпростіший варіант - це статична IP-адреса. Це зазвичай додаткова послуга провайдера, яка коштує 20-50 грн на місяць. Для того, щоб отримати статичну адресу - просто звернися в підтримку свого провайдера.

Переверіти свою поточну публічну IP-адресу можна, наприклад, за допомогою сервіса [2ip.ua](https://2ip.ua/ua/).

Альтернатива статичній адресі - це доменне ім‘я від одного з сервісів Dynamic DNS. Зараз можна отримати безкоштовне доменне ім‘я від сервісу [noip.com](https://www.noip.com/remote-access). Також деякі виробники роутерів (наприклад, TP Link) мають власні сервіси Dynamic DNS, в яких доменне ім‘я можна отримати безкоштовно. В будь-якому випадку, для роботи доменного імені доведеться зробити нескладні налаштування роутера (залежно від моделі роутера - зазвичай це пункт меню Network->Dynamic DNS).

### 1.1. Перевірка через ping

Переконайся, що хост (IP-адреса або ім‘я) доступний для пінга через WAN (із Інтернета).
Зробити це можна, наприклад, за допомогою сервіса [ping.eu](https://ping.eu/ping/).

Якщо ping не працює - то потрібно включити протокол ICMP в налаштуваннях роутера (залежно від моделі роутера - зазвичай це пункт меню Network->Firewall або Security). Після включення ICMP пінг повинен запрацювати.

Іноді трапляються складні випадки, коли провайдер блокує ping (ICMP пакети) або "достучатися" до публічної адреси з інших причин неможливо. В такому випадку тобі доведеться розібратися і знайти рішення самостійно або звернутися по допомогу до того, хто розбирається в мережах.

### 1.2. Перевірка через HTTP

Альтернативою ping може бути використання WEB-сервера, який відповідає на HTTP запити. Цей дуже зручний варіант у випадку, коли роутер живиться від акумулятора. В цьому варіанті тоби необхідно організувати WEB-сервер, який буде відповідати (будь що зі статусом 200) на HTTP запит GET. Сервер повинен працювати на пристрої, який живиться безпосередньо від мережі (не від акумулятора!). Це може бути мінікомп‘ютер типу Raspberry Pi або просто старий PC. Окрім цього, тобі потрібно буде налаштувати на роутері port forwarding, так щоб можна було "достучатися" до твого WEB-сервера із Інтернета.

## 2. Створи нового бота за допомогою @BotFather

- зайди на [@BotFather](https://t.me/BotFather)
- запусти команду `/start`
- запусти команду `/newbot`
- у відповідь на запити @BotFather введи назву (name) та ім‘я (username) бота, наприклад name: **Світло УК** та username: **svitlo_uk_bot**
- збережи токен нового бота (зверни увагу, токен - це чутлива інформація!)
- за допомогою команди `/setuserpic` встанови картинку бота (це не обов‘язково)
- за допомогою команди `/setdescription` введи опис бота, наприклад **Інформація щодо вимкнення світла в У-квартал** (це не обов‘язково)
- за допомогою команди `/setcommands` встанови наступний список команд бота:

```txt
current - Поточна ситуація
stats - Статистика по світлу
subscribe - Підписатися
unsubscribe - Відписатися
about - Про бот
```

## 3. Зареєструй створенорго бота

Увага, найближчим часом процес реєстрації буде автоматизовано і можна буде зареєструвати свого бота власноруч за допомогою спеціального (окремого) бота [@ElectroFatherBot](https://t.me/ElectroFatherBot)!

Поки що для реєстрації бота треба звернутися до [@oleksandr_changli](https://t.me/oleksandr_changli) та передати наступні дані:

- назву локації, наприклад **У-квартал**
- IP-адресу або доменне ім‘я (хост) у випадку перевірки через ping / URL у випадку перевірки через HTTP
- токен свого бота
- username свого бота
